@model List<ProjectsBaseShared.Models.Project>
@{
    ViewBag.Title = "Home Page";
}

@if (TempData["Message"] != null)
{
    <div class="alert alert-success" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        @TempData["Message"]
    </div>
}

<div class="row mb-1">
    <div class="col-md-6">
        <h2>Participating in project</h2>
        <p>
            During busy season each auditor is trying to be as much productive as possible. Below You can find all available projects for upcoming season.
            Apply for those in which you are most interested in. If Your candidature will be accepted  by manager you will receive email with confirmation.
            Your available capacity can be checked in My Season tab.
        </p>
    </div>
    <div class="col-md-6">
        <h2>Creating project</h2>
        <p>
            Click Add project to complete information about project. Remember to check if client for which you are creating project is in your scope.
            To check application go to My projects tab.
        </p>
    </div>
</div>

@using (Html.BeginForm())
{
    <div class="row mb-3">
        @if (@Model != null && @Model.Count > 0)
        {
            <div class="col-lg-6 col-md-12 order-lg-2 mb-2">
                <div class="float-right">
                    <a href="@Url.Action("Add", "Home")" class="btn btn-primary btn-eac-main">Add project</a>
                </div>
            </div>
            <div class="form-inline col-lg-6 col-md-12 order-lg-1 ">
                 @Html.TextBox("projectName", "", new { @class = "form-control w-75", placeholder = "Search by name..." })
                <input class="btn btn-light" type="submit" value="Search"/>
            </div>
        }
        @if (@Model == null || @Model.Count == 0)
        {
            <div class="col-md-12">
                <div class="float-right">
                    <a href="@Url.Action("Add", "Home")" class="btn btn-primary btn-eac-main">Add project</a>
                </div>
            </div>
        }
    </div>
}

<div class="row">
    <div class="col-md-12">
        @if (@Model != null && @Model.Count > 0)
        {
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Name</th>
                        <th scope="col" class="d-none d-sm-table-cell">Starting Date</th>
                        <th scope="col" class="d-none d-sm-table-cell">Closing Date</th>
                        <th scope="col"></th>
                    </tr>
                </thead>
                <tbody>
                    @for (int i = 0; i < @Model.Count; i++)
                    {
                        <tr>
                            <td>@(i + 1)</td>
                            <td>@Model[i].ProjectName</td>
                            <td class="d-none d-sm-table-cell">@Model[i].ProjectStartDate.ToShortDateString()</td>
                            <td class="d-none d-sm-table-cell">@Model[i].ProjectEndDate.ToShortDateString()</td>
                            <td><input class="btn btn-link" type="button" value="Details" onclick="location.href = '@Url.Action("ProjectDetails", new {id = @Model[i].ProjectId})'" /></td>
                        </tr>
                    }
                </tbody>
            </table>
        }
        @if (@Model == null || @Model.Count == 0)
        {
            <div class="col-md-12 text-center">
                <h3>It seems that there aren't any open projects yet. Try again later.</h3>
            </div>
        }
    </div>
</div>